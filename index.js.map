{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48980584-3e4c841e1693c4db1e58a6993';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page: page,\n                per_page: 40,\n            },\n        });\n\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw error;\n    }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = document.querySelector('.gallery');\nlet lightbox = new SimpleLightbox('.gallery a');\n\nexport function renderImages(images) {\n    if (images.length === 0) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    const galleryMarkup = createGalleryMarkup(images);\n    gallery.appendChild(galleryMarkup);\n\n    lightbox.refresh();\n}\n\nfunction createGalleryMarkup(images) {\n    const galleryFragment = document.createDocumentFragment();\n\n    images.forEach(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n        const galleryItem = document.createElement('a');\n        galleryItem.classList.add('gallery-item');\n        galleryItem.href = largeImageURL;\n\n        const img = document.createElement('img');\n        img.src = webformatURL;\n        img.alt = tags;\n        img.loading = 'lazy';\n\n        const infoDiv = document.createElement('div');\n        infoDiv.classList.add('info');\n\n        const createInfoBlock = (label, value) => {\n            const div = document.createElement('div');\n            const text = document.createElement('p');\n            text.classList.add(`${label.toLowerCase()}-text`);\n            text.textContent = label;\n            const val = document.createElement('p');\n            val.textContent = value;\n            div.appendChild(text);\n            div.appendChild(val);\n            return div;\n        };\n\n        infoDiv.append(\n            createInfoBlock('Likes', likes),\n            createInfoBlock('Views', views),\n            createInfoBlock('Comments', comments),\n            createInfoBlock('Downloads', downloads)\n        );\n\n        galleryItem.appendChild(img);\n        galleryItem.appendChild(infoDiv);\n        galleryFragment.appendChild(galleryItem);\n    });\n\n    return galleryFragment;\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('#search-form');\nconst input = document.querySelector('#search-input');\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\ngallery.innerHTML = '';\nloadMoreBtn.classList.remove('visible');\nlet loadedImages = 0;\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    query = input.value.trim();\n    if (!query) {\n        iziToast.warning({\n            title: 'Error',\n            message: 'Type a search query!',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    page = 1;\n    loadedImages = 0;\n    gallery.innerHTML = '';\n    loadMoreBtn.classList.remove('visible');\n    loader.classList.add('visible');\n\n    try {\n        const data = await fetchImages(query, page);\n        totalHits = data.totalHits;\n        loadedImages += data.hits.length;\n        renderImages(data.hits);\n\n        if (loadedImages < totalHits && data.hits.length === 40) {\n            loadMoreBtn.classList.add('visible');\n        }\n    } catch (error) {\n        iziToast.error({ title: 'Error', message: 'Try again!', position: 'topRight' });\n    } finally {\n        loader.classList.remove('visible');\n    }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    if (!query) {\n        iziToast.warning({\n            title: 'Error',\n            message: 'No search query found!',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    page += 1;\n    loadMoreBtn.classList.remove('visible');\n    loader.classList.add('visible');\n\n    try {\n        const data = await fetchImages(query, page);\n        loadedImages += data.hits.length;\n        renderImages(data.hits);\n\n        if (loadedImages >= totalHits || data.hits.length < 40) {\n            loadMoreBtn.classList.remove('visible');\n            iziToast.info({ title: 'Info', message: \"We're sorry, but you've reached the end of search results.\" });\n        } else {\n            loadMoreBtn.classList.add('visible');\n      }\n      smoothScroll();\n    } catch (error) {\n        iziToast.error({ title: 'Error', message: 'Try again!', position: 'topRight' });\n    } finally {\n        loader.classList.remove('visible');\n    }\n});\n\nfunction smoothScroll() {\n    window.scrollBy({\n        top: window.innerHeight,\n        left: 0,\n        behavior: \"smooth\"\n    });\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","axios","error","gallery","lightbox","SimpleLightbox","renderImages","images","iziToast","galleryMarkup","createGalleryMarkup","galleryFragment","webformatURL","largeImageURL","tags","likes","views","comments","downloads","galleryItem","img","infoDiv","createInfoBlock","label","value","div","text","val","form","input","loader","loadMoreBtn","totalHits","loadedImages","event","data","smoothScroll"],"mappings":"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"}